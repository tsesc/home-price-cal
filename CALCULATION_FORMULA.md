# 房價計算公式說明

## 基本計算公式

### 1. 面積計算

#### 建物總面積（不含車位）
```
建物總面積 = 主建物面積 + 陽台面積 + 雨遮面積 + 共同使用部分1 + 共同使用部分2
```
範例：23.43 + 2.81 + 1.28 + 18.93 + 3.87 = 50.32 坪

#### 總面積（含車位）
```
總面積 = 建物總面積 + 車位面積
```
範例：50.32 + 10.36 = 60.68 坪

### 2. 價格計算

#### 基礎建物價格
```
基礎建物價格 = 建物總面積 × 單價
```

#### 調整後建物價格
```
調整後建物價格 = 基礎建物價格 × 樓層溢價係數 × 屋齡折舊係數
```

#### 房屋總價
```
房屋總價 = 調整後建物價格 + 車位價格
```

#### 實際單價（回推）
```
實際單價 = 調整後建物價格 ÷ 建物總面積
```

### 3. 比例計算（台灣房地產標準）

#### 公設比（最重要指標）
```
公式：公設比 = 共有部分（不含車位） ÷ 建物總面積（不含車位） × 100%
計算：公設比 = 12.44 ÷ 39.96 × 100%
結果：31.13%
```

#### 得房率（實際可用空間）
```
公式：得房率 = (主建物 + 附屬建物) ÷ 建物總面積（不含車位） × 100%
計算：得房率 = (23.43 + 2.81 + 1.28) ÷ 39.96 × 100%
     得房率 = 27.52 ÷ 39.96 × 100%
結果：68.87%
```

#### 主建物占比（實際室內空間）
```
公式：主建物占比 = 主建物面積 ÷ 建物總面積（不含車位） × 100%
計算：主建物占比 = 23.43 ÷ 39.96 × 100%
結果：58.64%
```

#### 附屬建物比例
```
公式：附屬建物比例 = (陽台 + 雨遮) ÷ 建物總面積（不含車位） × 100%
計算：附屬建物比例 = (2.81 + 1.28) ÷ 39.96 × 100%
     附屬建物比例 = 4.09 ÷ 39.96 × 100%
結果：10.24%
```

#### 主建物占總面積比例（含車位）
```
公式：主建物占總面積 = 主建物面積 ÷ 總面積（含車位） × 100%
計算：主建物占總面積 = 23.43 ÷ 50.32 × 100%
結果：46.56%
```
這就是實價登錄顯示的「主建物面積占建物移轉總面積之比例：46.56%」

#### 驗證計算（各部分相加應等於100%）
```
建物總面積（不含車位）= 39.96坪 = 100%
- 主建物：23.43坪 = 58.64%
- 陽台：2.81坪 = 7.03%
- 雨遮：1.28坪 = 3.20%
- 公設：12.44坪 = 31.13%
總計：39.96坪 = 100.00% ✓
```

## 根據實價登錄資料驗證

根據 README.md 的實際交易資料：
- 總價：2,800 萬元
- 車位價格：220 萬元  
- 建物價格：2,800 - 220 = 2,580 萬元

### 面積明細
- 主建物：23.43 坪
- 陽台：2.81 坪
- 雨遮：1.28 坪
- 共同使用部分（不含車位）：12.44 坪
- 車位：10.36 坪
- **建物總面積（不含車位）：39.96 坪**
- **總面積（含車位）：50.32 坪**

### 單價計算
- **精確單價：2,580 ÷ 39.96 = 64.5646 萬元/坪**
- **使用單價：64.56 萬元/坪**（確保總價為 2800）

### 單價計算方式說明
實價登錄的單價（64.59萬元/坪）與實際計算有微小差異：
- 分子：建物價格（總價 - 車位價格）= 2,580 萬元
- 分母：建物面積（總面積 - 車位面積）= 39.96 坪
- 精確計算：2,580 ÷ 39.96 = 64.5646 萬元/坪
- 驗證：39.96 × 64.56 + 220 = 2,579.78 + 220 ≈ 2,800 萬元

## 參數說明

### 面積參數
- **主建物面積**：實際居住空間的面積
- **陽台面積**：陽台的面積
- **雨遮面積**：雨遮的面積
- **共同使用部分**：公共設施（如梯廳、管委會空間等）的持分面積
- **車位面積**：停車位的面積

### 價格參數
- **單價**：每坪的價格（萬元/坪）
- **車位價格**：車位的總價（萬元）

### 調整係數
- **樓層溢價係數**：根據樓層高低調整價格（建議範圍：0.9-1.2）
- **屋齡折舊係數**：根據屋齡調整價格（建議範圍：0.8-1.0）

## 使用說明

1. 輸入各項面積參數
2. 設定單價和車位價格
3. 調整樓層和屋齡係數
4. 系統自動計算並顯示：
   - 詳細的計算過程
   - 最終總價
   - 各項面積比例分析